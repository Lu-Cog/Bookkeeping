import { daysInMonth } from '../units/month';
import { YEAR, MONTH, DATE, HOUR, MINUTE, SECOND, MILLISECOND, WEEK, WEEKDAY } from '../units/constants';
import getParsingFlags from './parsing-flags';
export default function checkOverflow(m) {
    var overflow;
    var a = m._a;
    if (a && getParsingFlags(m).overflow === -2) {
        if (a[MONTH] < 0 || a[MONTH] > 11) {
            overflow = MONTH;
        } else {
            if (a[DATE] < 1 || a[DATE] > daysInMonth(a[YEAR], a[MONTH])) {
                overflow = DATE;
            } else {
                if (a[HOUR] < 0 || a[HOUR] > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0))) {
                    overflow = HOUR;
                } else {
                    if (a[MINUTE] < 0 || a[MINUTE] > 59) {
                        overflow = MINUTE;
                    } else {
                        if (a[SECOND] < 0 || a[SECOND] > 59) {
                            overflow = SECOND;
                        } else {
                            if (a[MILLISECOND] < 0 || a[MILLISECOND] > 999) {
                                overflow = MILLISECOND;
                            } else {
                                overflow = -1;
                            }
                        }
                    }
                }
            }
        }

        if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {
            overflow = DATE;
        }

        if (getParsingFlags(m)._overflowWeeks && overflow === -1) {
            overflow = WEEK;
        }

        if (getParsingFlags(m)._overflowWeekday && overflow === -1) {
            overflow = WEEKDAY;
        }

        getParsingFlags(m).overflow = overflow;
    }

    return m;
}
