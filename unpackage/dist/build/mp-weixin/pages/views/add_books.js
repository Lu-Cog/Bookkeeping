(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/views/add_books"],{"2d5f":function(o,t,n){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){n.e("common/vendor").then(function(){return resolve(n("f5a6"))}.bind(null,n)).catch(n.oe)},e=function(){n.e("common/vendor").then(function(){return resolve(n("9bad"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("common/vendor").then(function(){return resolve(n("3573"))}.bind(null,n)).catch(n.oe)},u=getApp(),c={components:{vanButton:a,vanIcon:e,vanEmpty:i},data:function(){return{book_id:"",bmw:0,url:u.globalData.api_base_url,books:[],form:{name:"",sort:100}}},onLoad:function(o){o.book_id&&this.setData({book_id:o.book_id}),this.booksFun(),this.bookInfo()},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{booksFun:function(){var o=this;u.globalData.ajaxPost("/api/get-user-book",{},(function(t){if(200===t.code){var n=193*t.data.length+228;o.setData({bmw:n,books:t.data})}}))},setTab:function(o){var t=o.currentTarget.dataset.id;this.setData({book_id:t}),console.log(t),t?this.bookInfo():this.setData({form:{name:"",sort:100}})},bookInfo:function(){var o=this,t=this.book_id;t?u.globalData.ajaxPost("/api/get-book-info",{id:this.book_id},(function(t){200===t.code&&o.setData({form:{name:t.data.name,sort:t.data.sort}})})):this.setData({form:{name:"",sort:100}})},setInput:function(o){var t=o.currentTarget.dataset.key;"form.".concat(t);this.form[t]=o.detail.value},saveBook:function(){var t=this,n=this.form;if(n.id=this.book_id,!n.name)return o.showToast({icon:"none",title:"请输入账本名称"}),!1;u.globalData.ajaxPost("/api/set-book-edit",n,(function(n){200===n.code&&(o.showToast({icon:"none",title:"提交成功",duration:1e3,success:function(){}}),t.booksFun(),t.bookInfo())}))},delBook:function(){var t=this,n={id:this.book_id,user_id:o.getStorageSync("userId")};o.showModal({content:"确定删除此账本吗，无法找回？",success:function(a){a.confirm&&u.globalData.ajaxPost("/api/set-book-del",n,(function(n){200===n.code&&(t.book_id==u.globalData.book_id&&u.globalData.ajaxPost("/api/get-user-book",{},(function(o){200===o.code&&(u.globalData.book_id=o.data[0].id,u.globalData.book_name=o.data[0].name)})),t.setData({book_id:""}),o.showToast({icon:"none",title:"删除成功",duration:1e3,success:function(){}}),t.booksFun(),t.bookInfo())}))}})}}};t.default=c}).call(this,n("543d")["default"])},"3da8":function(o,t,n){},"6aaa":function(o,t,n){"use strict";var a=n("3da8"),e=n.n(a);e.a},7783:function(o,t,n){"use strict";n.r(t);var a=n("8127"),e=n("de4f");for(var i in e)"default"!==i&&function(o){n.d(t,o,(function(){return e[o]}))}(i);n("6aaa");var u,c=n("f0c5"),s=Object(c["a"])(e["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);t["default"]=s.exports},8127:function(o,t,n){"use strict";var a;n.d(t,"b",(function(){return e})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var e=function(){var o=this,t=o.$createElement;o._self._c},i=[]},"960e":function(o,t,n){"use strict";(function(o){n("2aad");a(n("66fd"));var t=a(n("7783"));function a(o){return o&&o.__esModule?o:{default:o}}wx.__webpack_require_UNI_MP_PLUGIN__=n,o(t.default)}).call(this,n("543d")["createPage"])},de4f:function(o,t,n){"use strict";n.r(t);var a=n("2d5f"),e=n.n(a);for(var i in a)"default"!==i&&function(o){n.d(t,o,(function(){return a[o]}))}(i);t["default"]=e.a}},[["960e","common/runtime","common/vendor"]]]);