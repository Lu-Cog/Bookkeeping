(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/views/updateUserInfo"],{"0716":function(t,e,n){},"2e20":function(t,e,n){"use strict";n.r(e);var a=n("31fa"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"31fa":function(t,e,n){"use strict";(function(t){function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){n.e("common/vendor").then(function(){return resolve(n("f5a6"))}.bind(null,n)).catch(n.oe)},o=function(){n.e("common/vendor").then(function(){return resolve(n("9bad"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("common/vendor").then(function(){return resolve(n("3573"))}.bind(null,n)).catch(n.oe)},u=getApp(),c={components:{vanButton:i,vanIcon:o,vanEmpty:s},data:function(){return{info:{work_no:"",avatar_url:"",name:"",sex:0,job:"",phone:"",note:"",tichen:"",birthday:"",status:1,book_id:0},switchChecked:!0,switchText:"开启",sexList:[{label:"未知",value:0},{label:"男",value:1},{label:"女",value:2}],sexIndex:0,userType:1}},onLoad:function(e){this.userType=e.type;var n="";n=1==e.type?e.id?"客户信息修改":"添加客户":e.id?"店员信息修改":"添加店员",e.id?(this.userId=e.id,this.getInfo(),t.setNavigationBarTitle({title:n})):t.setNavigationBarTitle({title:n})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{changeDate:function(t){console.log(t.detail.value),this.info.birthday=t.detail.value},changeSwitch:function(t){this.switchChecked=t.detail.value,this.switchChecked?(this.info.status=1,this.switchText="开启"):(this.info.status=0,this.switchText="关闭")},changeP:function(t){this.info.sex=t.detail.value,this.sexIndex=t.detail.value},setInpt:function(t){var e=t.currentTarget.dataset.key,n=t.detail.value;"info.".concat(e);this.info[e]=n,console.log(t)},setUpdateInfo:function(){var e=this;if(this.info.book_id=u.globalData.book_id,2==this.userType&&!this.info.work_no)return t.showToast({title:"请填写工号",icon:"none"});if(!this.info.name)return t.showToast({title:"请填写姓名",icon:"none"});if(!this.info.tichen&&2==this.userType)return t.showToast({title:"请填写员工初始提成",icon:"none"});var n="";n=1==this.userType?"/api/set-customer-info":"/api/set-staff-info",u.globalData.ajaxPost(n,this.info,(function(n){200===n.code&&(t.showToast({title:"操作成功"}),setTimeout((function(){e.getInfo(),t.navigateBack({delta:1})}),500))}))},getInfo:function(){var t=this,e="";e=1==this.userType?"/api/get-customer-info":"/api/get-staff-info",u.globalData.ajaxPost(e,{id:this.userId},(function(e){200===e.code&&t.setData({info:e.data,sexIndex:e.data.sex||0,switchChecked:1==e.data.status,switchText:1==e.data.status?"开启":"关闭"})}))},upimg:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(n){t.showLoading({title:"图片压缩中..."});var i=n.tempFilePaths[0];t.compressImage({src:i,quality:70,success:function(n){t.showLoading({title:"图片上传中..."}),t.uploadFile({url:getApp().globalData.api_base_url+"/api/upload-file",header:{chartset:"utf-8","content-type":"multipart/form-data"},filePath:n.tempFilePath,name:"file",success:function(t){var n=JSON.parse(t.data);e.setData(a({},"info.avatar_url",n.data))},complete:function(){t.hideLoading()}})},complete:function(){t.hideLoading()}})}})}}};e.default=c}).call(this,n("543d")["default"])},"3f6a":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement;t._self._c},o=[]},"59b3":function(t,e,n){"use strict";(function(t){n("2aad");a(n("66fd"));var e=a(n("d3b9"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},9331:function(t,e,n){"use strict";var a=n("0716"),i=n.n(a);i.a},d3b9:function(t,e,n){"use strict";n.r(e);var a=n("3f6a"),i=n("2e20");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("9331");var s,u=n("f0c5"),c=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=c.exports}},[["59b3","common/runtime","common/vendor"]]]);