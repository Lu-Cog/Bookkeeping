(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/userReg"],{"14e9":function(e,t,a){"use strict";(function(e){a("2aad");n(a("66fd"));var t=n(a("f986"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=a,e(t.default)}).call(this,a("543d")["createPage"])},"5cf9":function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var o=function(){var e=this,t=e.$createElement;e._self._c},i=[]},"9e72":function(e,t,a){},a3d6:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=getApp(),n={data:function(){return{phone:"",nick_name:"",avatar_url:""}},onLoad:function(e){},methods:{setUserInfo:function(t){var n=this;e.showLoading({title:"正在获取中"}),"getPhoneNumber:ok"==t.detail.errMsg?a.globalData.appGetCode((function(e){n.getUserPhoneNumber(t.detail.encryptedData,t.detail.iv,e)})):e.hideLoading()},getUserPhoneNumber:function(e,t,n){var o=this;a.globalData.ajaxPost("/api/auth-phone",{encryptedData:e,iv:t,code:n},(function(e){200===e.code&&(o.phone=e.data.phoneNumber)}))},subform:function(){var t=this;if(!t.nick_name)return e.showToast({title:"请填写昵称！",icon:"none"});if(!t.phone)return e.showToast({title:"请先授权获取安全手机！",icon:"none"});var n={nick_name:this.nick_name,phone:this.phone,avatar_url:this.avatar_url};a.globalData.ajaxPost("/api/auth-phone-reg",n,(function(t){200===t.code&&(e.showToast({title:"注册成功"}),e.setStorageSync("token",t.data.token),e.setStorageSync("userId",t.data.user_id),setTimeout((function(){e.reLaunch({url:"/pages/tally/index"})}),500))}))},upimg:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(a){e.showLoading({title:"图片压缩中..."});var n=a.tempFilePaths[0];e.compressImage({src:n,quality:70,success:function(a){e.showLoading({title:"图片上传中..."}),e.uploadFile({url:getApp().globalData.api_base_url+"/api/upload-file",header:{chartset:"utf-8","content-type":"multipart/form-data"},filePath:a.tempFilePath,name:"file",success:function(e){var a=JSON.parse(e.data);t.avatar_url=a.data},complete:function(){e.hideLoading()}})},complete:function(){e.hideLoading()}})}})}}};t.default=n}).call(this,a("543d")["default"])},da93:function(e,t,a){"use strict";a.r(t);var n=a("a3d6"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},f986:function(e,t,a){"use strict";a.r(t);var n=a("5cf9"),o=a("da93");for(var i in o)"default"!==i&&function(e){a.d(t,e,(function(){return o[e]}))}(i);a("fa13");var u,r=a("f0c5"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],u);t["default"]=c.exports},fa13:function(e,t,a){"use strict";var n=a("9e72"),o=a.n(n);o.a}},[["14e9","common/runtime","common/vendor"]]]);